<div id="review-list">
    {% for review in reviews_page %}
    <div class="review-item">
        <h3 class="review-title">
            <a href="{% url 'places:place_detail' review.place.pk %}">{{ review.place.name }}</a>
        </h3>
        <p class="review-rating">별점: {{ review.rating }} / 5.0</p>
        <p class="review-content">{{ review.content }}</p>
        <p class="review-date">{{ review.created_at|date:"Y-m-d H:i" }}</p>
        
        <!-- 수정/삭제 버튼 -->
        <div class="review-actions">
            <a href="{% url 'reviews:place_edit' review.place.pk review.pk %}?from_mypage=1">수정</a>
            <form method="post" action="{% url 'reviews:delete_review' review.place.pk review.pk %}" style="display: inline;">
                {% csrf_token %}
                <button type="submit" onclick="return confirm('정말 삭제하시겠습니까?')">삭제</button>
            </form>
        </div>
    
        <div class="review-photos">
            {% for photo in review.photos.all %}
                {% if photo.image %}  {# 파일이 있는 경우에만 .url 접근 #}
                <img src="{{ photo.image.url }}" alt="리뷰 사진" width="150">
                {% endif %}
            {% endfor %}
        </div>
    
    </div>
    {% empty %}
    <li>작성한 댓글이 없습니다.</li>
{% endfor %}
</div>



<div class="pagination">
{% if reviews_page.has_previous %}
    <a href="?page_reviews=1&page_likes={{ likes_page.number }}&page_routes={{ routes_page.number }}">처음</a>
    <a href="?page_reviews={{ reviews_page.previous_page_number }}&page_likes={{ likes_page.number }}&page_routes={{ routes_page.number }}">이전</a>
{% endif %}

<span>{{ reviews_page.number }} / {{ reviews_page.paginator.num_pages }}</span>

{% if reviews_page.has_next %}
    <a href="?page_reviews={{ reviews_page.next_page_number }}&page_likes={{ likes_page.number }}&page_routes={{ routes_page.number }}">다음</a>
    <a href="?page_reviews={{ reviews_page.paginator.num_pages }}&page_likes={{ likes_page.number }}&page_routes={{ routes_page.number }}">마지막</a>
{% endif %}
</div>