{% extends "base.html" %}
{% load static %}
{% block content %}
<link rel="stylesheet" href="{% static 'css/main.css' %}">

<form method="get" action="">
    <input
        type="text"
        name="prompt"
        placeholder="ì—¬í–‰ì§€ ì¡°ê±´ì„ ì…ë ¥í•´ë³´ì„¸ìš”!"
        value="{{ prompt }}"
    />
    <button type="submit">ì¶”ì²œë°›ê¸°</button>
</form>

<div class="filter-bar">
  <a href="?{% if prompt %}prompt={{ prompt }}&{% endif %}"
     class="btn {% if not place_class %}active{% endif %}">ì „ì²´</a>
  <a href="?{% if prompt %}prompt={{ prompt }}&{% endif %}place_class=1"
     class="btn {% if place_class == '1' %}active{% endif %}">ë ˆí¬ì¸ </a>
  <a href="?{% if prompt %}prompt={{ prompt }}&{% endif %}place_class=2"
     class="btn {% if place_class == '2' %}active{% endif %}">ì‡¼í•‘</a>
  <a href="?{% if prompt %}prompt={{ prompt }}&{% endif %}place_class=3"
     class="btn {% if place_class == '3' %}active{% endif %}">ê´€ê´‘ì§€</a>
  <a href="?{% if prompt %}prompt={{ prompt }}&{% endif %}place_class=4"
     class="btn {% if place_class == '4' %}active{% endif %}">ë¬¸í™”ì‹œì„¤</a>
</div>

<h2 class="place-section__title">ì „ì²´ ì—¬í–‰ì§€</h2>
<ul class="place-list">
  {% for place in places %}
  <li class="place-item">
    <div class="place-item__head">
      <span class="place-item__name">{{ place.name }}</span>
      <span class="place-item__meta">({{ place.region }}) Â·
        {% if place.place_class == 1 %}ë ˆí¬ì¸ {% elif place.place_class == 2 %}ì‡¼í•‘{% elif place.place_class == 3 %}ê´€ê´‘ì§€{% elif place.place_class == 4 %}ë¬¸í™”ì‹œì„¤{% endif %}
      </span>
      <a class="place-item__link" href="{% url 'places:place_detail' place.pk %}">ìì„¸íˆ ë³´ê¸°</a>
      {% if user.is_authenticated %}
      <form method="post" action="{% url 'places:place_like' place.pk %}" class="like-form">
        {% csrf_token %}
        <button type="submit" class="like-button">
          {% if place.is_liked %}â¤ï¸ ì·¨ì†Œ{% else %}ğŸ¤ ì¢‹ì•„ìš”{% endif %}
        </button>
      </form>
      {% endif %}
    </div>

    <ul class="tag-list">
      {% for tag in place.tags.all %}
      <li class="tag">#{{ tag.name }}</li>
      {% endfor %}
    </ul>
  </li>
  {% endfor %}
</ul>
{% endblock %}