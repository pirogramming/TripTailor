{% extends 'base.html' %}
{% block title %}ë¦¬ë·° ëª©ë¡{% endblock %}

{% block content %}
<h1>ë¦¬ë·° ëª©ë¡</h1>

<form method="get" class="mb-3">
  <input type="number" name="route" value="{{ request.GET.route }}" placeholder="route id í•„í„°">
  <input type="number" name="user" value="{{ request.GET.user }}" placeholder="user id í•„í„°">
  <button type="submit">í•„í„°</button>
  <a href="{% url 'reviews:list' %}">ì´ˆê¸°í™”</a>
</form>

<p><a href="{% url 'reviews:create' %}" class="btn btn-primary">+ ë¦¬ë·° ì‘ì„±</a></p>

<ul>
  {% for r in reviews %}
  <li>
    <a href="{% url 'reviews:detail' r.pk %}">
      {{ r.title }}
    </a>
    <div>[{{ r.route }}] â˜… {{ r.rating }} â€” {{ r.summary }}</div>
    <div>by {{ r.user }} Â· {{ r.created_at|date:"Y-m-d H:i" }}</div>
    {% if user == r.user %}
      <div class="action-buttons">
        <a href="{% url 'reviews:edit' r.pk %}" class="btn btn-sm btn-outline-primary">âœï¸ ìˆ˜ì •</a>
        <a href="{% url 'reviews:delete' r.pk %}" class="btn btn-sm btn-outline-danger" onclick="return confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')">ğŸ—‘ï¸ ì‚­ì œ</a>
      </div>
    {% endif %}
  </li>
  {% empty %}
  <li>ë“±ë¡ëœ ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤.</li>
  {% endfor %}
</ul>

{% if is_paginated %}
  <div class="pagination">
    {% if page_obj.has_previous %}
      <a href="?page={{ page_obj.previous_page_number }}{% if request.GET.route %}&route={{ request.GET.route }}{% endif %}{% if request.GET.user %}&user={{ request.GET.user }}{% endif %}">&laquo; Prev</a>
    {% endif %}
    <span>{{ page_obj.number }} / {{ paginator.num_pages }}</span>
    {% if page_obj.has_next %}
      <a href="?page={{ page_obj.next_page_number }}{% if request.GET.route %}&route={{ request.GET.route }}{% endif %}{% if request.GET.user %}&user={{ request.GET.user }}{% endif %}">Next &raquo;</a>
    {% endif %}
  </div>
{% endif %}
{% endblock %}
