{% if place %}
<h4>{{ place.name }}의 댓글 ({{ reviews.count }}개)</h4>
{% endif %}

<ul class="review-list">
  {% for r in reviews %}
  <li class="review-item">
    <div class="review-header">
      <div class="review-meta">
        <span class="rating">⭐{{ r.rating }}</span>
      </div>
      <div class="review-info">
        <span class="author">by {{ r.user.username }}</span>
        <span class="date">{{ r.created_at|date:"Y-m-d H:i" }}</span>
      </div>
    </div>
    
    <div class="review-content">
      {{ r.content }}
    </div>
    
    {% if r.photos.exists %}
    <div class="review-photos">
      {% for photo in r.photos.all %}
        <img src="{{ photo.url }}" alt="댓글 이미지" class="review-photo" style="max-width: 100px; max-height: 100px; margin: 5px; border-radius: 5px;">
      {% endfor %}
    </div>
    {% endif %}
    
    {% if user == r.user %}
      <div class="action-buttons">
        <a href="{% url 'reviews:place_edit' place.id r.id %}" class="btn btn-sm btn-outline-primary">✏️ 수정</a>
        <button type="button" class="btn btn-sm btn-outline-danger delete-review-btn" data-review-id="{{ r.id }}" data-place-id="{{ place.id }}">🗑️ 삭제</button>
      </div>
    {% endif %}
  </li>
  {% empty %}
  <li class="no-reviews">등록된 댓글이 없습니다.</li>
  {% endfor %}
</ul>
