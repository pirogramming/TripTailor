{% extends "base.html" %}
{% load static %}
{% block content %}

<h2>ë£¨íŠ¸ ìˆ˜ì •</h2>

<form method="post" action="{% url 'routes:update_route' route.id %}">
  {% csrf_token %}
  <input type="hidden" name="from" value="{{ from_page }}">
  <div>
    <label>ì œëª©</label><br>
    <input type="text" name="title" value="{{ route.title }}" required>
  </div>

  <div>
    <label>ì§€ì—­ ìš”ì•½</label><br>
    <input type="text" name="location_summary" value="{{ route.location_summary }}">
  </div>

  <div>
    <label>ì„¤ëª…</label><br>
    <textarea name="description">{{ route.description }}</textarea>
  </div>

  <div>
    <label>ëŒ€í‘œ ì´ë¯¸ì§€ URL</label><br>
    <input type="url" name="cover_photo_url" value="{{ route.cover_photo_url }}">
  </div>

  <div>
    <label>
      <input type="checkbox" name="is_public" value="true" {% if route.is_public %}checked{% endif %}>
      ê³µê°œ ë£¨íŠ¸ë¡œ ì„¤ì •
    </label>
  </div>

  <button type="submit">ì €ì¥</button>
  <a href="{% url 'routes:detail' route.id %}?from={{ from_page }}">â† ëŒì•„ê°€ê¸°</a>
</form>

<h3 style="margin-top:32px;">ğŸ—ºï¸ í¬í•¨ëœ ì¥ì†Œ</h3>

<ol id="sortable-list" style="padding-left: 20px;">
  {% for rp in stops %}
    <li data-place-id="{{ rp.place.id }}" style="margin: 8px 0; cursor: move;">
      {{ rp.place.name }}
      <button type="button" class="delete-btn" data-place-id="{{ rp.place.id }}">ì‚­ì œ</button>
    </li>
  {% endfor %}
</ol>

<button id="save-order-btn">ìˆœì„œ ì €ì¥</button>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>
<script src="{% static 'js/edit_route.js' %}"></script>
{% endblock %}
